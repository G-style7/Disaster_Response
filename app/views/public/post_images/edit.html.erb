<div class = "container">
   <div class = "row mt-3">
    <div class ="col-3 text-center">
     <h2 class = "content">投稿編集</h2>
    </div>
   </div>
  </div>
  <div class = "row mt-5" >
   <div class = "col offset-3 mr-4" >
     <%= form_with model: @post_image ,url: post_image_path ,method: :patch do |f| %>
      <table class = "col-8" >
       <tr>
        <td><%= f.label "住所" %></td>
        <td><%= f.text_field :address ,class: "form-control mt-3" %></td>
       </tr>
       <tr>
               <script type="text/javascript">
         function initMap() {
       // latitude,longitudeから位置を特定
           var test ={lat: <%= @post_image.latitude %>, lng: <%= @post_image.longitude %>};
           var map = new google.maps.Map(document.getElementById('map'), {
                     zoom: 15,
                     center: test
                     });
           var transitLayer = new google.maps.TransitLayer();
           transitLayer.setMap(map);

           var contentString = '住所：<%= @post_image.address %>';
           var infowindow = new google.maps.InfoWindow({
             content: contentString
           });

       // Map上の指定した位置にピンを挿して表示する
           var marker = new google.maps.Marker({
                         position:test,
                         map: map,
                         title: contentString
                        });

            marker.addListener('click', function() {
              infowindow.open(map, marker);
            });
         }
       </script>
       <script async defer
                     src="https://maps.googleapis.com/maps/api/js?v=3.exp&key=<%=ENV["GOOGLE_MAP_API"]%>&callback=initMap">
       </script>
       <style type="text/css">
         #map { height: 400px;
                width: 70%;}
       </style>
       <!--mapの表示-->
       <div id="map"></div>

       </tr>
       <tr>
        <td><%= f.label "画像" %></td>
        <td><%= f.file_field :image ,class: "form-control mt-3" %></td>
       </tr>
       <tr>
        <td><%= f.label "タイトル" %></td>
        <td><%= f.text_field :title ,class: "form-control mt-3 mb-3" %></td>
       </tr>
        <td><%= f.label "説明" %></td>
        <td><%= f.text_area :introduction ,class: "form-control mt-3" %></td>
       </tr>
       <tr>
        <td></td>
        <td class ="text-center">
         <%= f.submit "編集内容を保存" ,class: "btn btn-success mt-3" %>
         <%= link_to "詳細へ戻る" ,post_image_path , class: "btn btn-primary mt-3 ml-5" %>
        </td>
       </tr>
      </table>
    <% end %>
    <div class ="col-3">

     </div>
   </div>
  </div>
